(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall/editAddress/editAddress"],{"1dc1":function(t,e,i){},"342b":function(t,e,i){"use strict";i.r(e);var n=i("cec5"),s=i("ff68");for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("a0a0");var a,r=i("f0c5"),c=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"7bf2":function(t,e,i){"use strict";(function(t){function n(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(c)throw a}}}}function s(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),r=i("0fed"),c={data:function(){return{addressId:null,showPhone:null,proviceArr:[],cityArr:[],districtArr:[],chooseLocation:"",value:[0,0,0],iconHidden:!0,showPickerStatus:!1,text:["请选择","请选择","请选择"],searchKey:"",chooseType:0,defaultLocation:!0,lists:["家","公司","学校","其他"],editMode:!1,submitData:{}}},onLoad:function(t){console.log(t);var e=t.id;if(this.addressId=e,0==t.id)this.submitData.isDefault=!0,this.submitData.locationType="家",this.editMode=!1;else{this.editMode=!0;var i=this.fetchAddress(e);switch(this.submitData.isDefault=i.is_default,this.submitData.detailLocation=i.setting,this.submitData.name=i.name,this.submitData.location=i.place,this.submitData.phone=i.pho,this.submitData.locationType=i.type,i.type){case"家":this.chooseType=0;break;case"公司":this.chooseType=1;break;case"学校":this.chooseType=2;break;case"其他":this.chooseType=3;break;default:this.chooseType=3}this.defaultLocation=i.is_default,this.showPhone=this.fixPhone(this.submitData.phone)}this.proviceArr=this.toArr(r),this.cityArr=this.toArr(r[0].children),this.districtArr=this.toArr(r[0].children[0].children)},computed:{fixPhone:function(){return function(t){return t.toString().substr(0,3)+"****"+t.toString().substr(7)}}},methods:{clearPhone:function(){this.showPhone=""},fetchAddress:function(e){var i,s=t.getStorageSync("UserAddress"),o=n(s);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(e==a.id)return a}}catch(r){o.e(r)}finally{o.f()}},getForm:function(t,e){var i=t.detail.value;this.submitData[e]=i,console.log(this.submitData)},getType:function(t,e){this.chooseType=t,this.submitData.locationType=e,console.log(this.submitData)},getDefault:function(t){this.defaultLocation=!this.defaultLocation,this.submitData.isDefault=this.defaultLocation,console.log(this.submitData)},toArr:function(t){var e=[];for(var i in t)e.push(t[i].name);return e},columnPicker:function(t){var e=t.detail.value;this.value[0]!==e[0]?(this.proviceArr=this.proviceArr,this.cityArr=this.toArr(r[e[0]].children),this.districtArr=this.toArr(r[e[0]].children[0].children),this.value=[e[0],0,0]):this.value[1]!==e[1]?(this.proviceArr=this.proviceArr,this.cityArr=this.cityArr,this.districtArr=this.toArr(r[e[0]].children[e[1]].children),this.value=[e[0],e[1],0]):this.value=e},picker:function(t){var e=this.value;if(r.length>0){var i=r[e[0]].name,n=r[e[0]].children[e[1]].name,s=r[e[0]].children[e[1]].children[e[2]].name;this.text=[i,n,s];var o=i+" "+n+" "+s,a=i+n+s;this.chooseLocation=o,this.submitData.location=a,console.log(this.submitData),this.showPickerStatus=!1}},showPicker:function(){this.showPickerStatus=!0},hidePicker:function(){this.showPickerStatus=!1},submitAddress:function(){var e={url:a.apis().addAddress,method:"POST",token:a.globalData.token,data:{isDefault:this.submitData.isDefault,location:this.submitData.location,detailLocation:this.submitData.detailLocation,locationType:this.submitData.locationType,name:this.submitData.name,phone:this.submitData.phone}};this.editMode&&(e.data.addressId=this.addressId,e.url=a.apis().editAddress),console.log(e),a.httpRequest(e).then((function(e){console.log(e),"success"==JSON.parse(e.data).msg?t.showToast({duration:800,icon:"success",title:"保存成功",success:function(){t.navigateBack({})}}):t.showToast({duration:800,icon:"loading",title:"网络开小差~",success:function(){t.navigateBack({})}})}))},deleteAddress:function(e){var i={url:a.apis().editAddress,method:"POST",token:a.globalData.token,data:{addressId:this.addressId,kill:1}};a.httpRequest(i).then((function(e){"success"==JSON.parse(e.data).msg?t.showToast({duration:800,icon:"success",title:"删除成功",success:function(){t.navigateBack({})}}):t.showToast({duration:800,icon:"loading",title:"网络开小差~",success:function(){t.navigateBack({})}})}))}}};e.default=c}).call(this,i("543d")["default"])},a0a0:function(t,e,i){"use strict";var n=i("1dc1"),s=i.n(n);s.a},cec5:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={tuiListCell:function(){return i.e("components/thorui/tui-list-cell/tui-list-cell").then(i.bind(null,"0a03"))},tuiButton:function(){return i.e("components/thorui/tui-button/tui-button").then(i.bind(null,"03d1"))}},s=function(){var t=this,e=t.$createElement;t._self._c},o=[]},f0ad:function(t,e,i){"use strict";(function(t){i("ff5b");n(i("66fd"));var e=n(i("342b"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},ff68:function(t,e,i){"use strict";i.r(e);var n=i("7bf2"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a}},[["f0ad","common/runtime","common/vendor"]]]);