(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall/productDetail/productDetail"],{"2eb3":function(t,e,n){"use strict";n.r(e);var o=n("68a7"),i=n("ba72");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("f4e3");var u,r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=s.exports},"45ac":function(t,e,n){"use strict";(function(t){function n(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,u=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw u}}}}function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),u={data:function(){return{chooseType:null,Typeindex:0,gid:null,submitCart:null,height:64,top:26,scrollH:0,opcity:0,iconOpcity:.5,rowdata:null,classifiedData:null,bannerIndex:0,topMenu:[{icon:"message",text:"消息",size:26,badge:3},{icon:"home",text:"首页",size:23,badge:0},{icon:"people",text:"我的",size:26,badge:0},{icon:"cart",text:"购物车",size:23,badge:2},{icon:"kefu",text:"客服小蜜",size:26,badge:0},{icon:"feedback",text:"我要反馈",size:23,badge:0},{icon:"share",text:"分享",size:26,badge:0}],menuShow:!1,popupShow:!1,collected:!1}},onLoad:function(e){var n=this;this.gid=e.gid,this.getGoodDetails();var o={};o=wx.getMenuButtonBoundingClientRect(),setTimeout((function(){t.getSystemInfo({success:function(t){n.width=o.left||t.windowWidth,n.height=o.top?o.top+o.height+8:t.statusBarHeight+44,n.top=o.top?o.top+(o.height-32)/2:t.statusBarHeight+6,n.scrollH=t.windowWidth}})}),0)},methods:{addCart:function(){var e=this;if(a.globalData.haslogin){var n={url:a.apis().addCart,token:a.globalData.token,method:"POST",data:this.submitCart};a.httpRequest(n).then((function(n){200==JSON.parse(n.data).code?t.showToast({duration:800,icon:"success",title:"添加成功"}):t.showToast({duration:800,icon:"loading",title:"添加失败"}),e.hidePopup()}))}else t.navigateTo({url:"../../login/login?entry=productDetail"})},getChooseType:function(t){this.Typeindex=t,this.chooseType=this.classifiedData.type[t],this.submitCart.fee=this.chooseType.fee,this.submitCart.tid=this.chooseType.id},getGoodDetails:function(){var t=this,e={url:a.globalData.token?a.apis().tokenGoodDetails:a.apis().noGoodDetails,method:"GET",token:a.globalData.token?a.globalData.token:null,data:{gid:this.gid}};a.httpRequest(e).then((function(e){console.log("detail:",JSON.parse(e.data));var n=JSON.parse(e.data).data;t.classifyItems(n)}))},classifyItems:function(t){var e,o=t.fee.toFixed(2).toString().split("."),i={gid:t.id,name:t.name,fee:o,oldfee:t.oldfee,paynum:t.paynum,detail:t.context,icon:t.icon,type:t.type,context:JSON.parse(t.context),isLike:t.isLike},u=new Array,r=n(t.imgs);try{for(r.s();!(e=r.n()).done;){var s=e.value;u.push(s[0].imgSrc)}}catch(l){r.e(l)}finally{r.f()}i.banner=u,this.classifiedData=i,this.chooseType=i.type[0],this.submitCart={gid:i.gid,mid:a.globalData.mid,fee:this.chooseType.fee,num:1,tid:this.chooseType.id},this.collected=t.isLike,console.log("classyer",i)},bannerChange:function(t){this.bannerIndex=t.detail.current},previewImage:function(e){var n=e.currentTarget.dataset.index;t.previewImage({current:this.classifiedData.banner[n],urls:this.classifiedData.banner})},back:function(){t.navigateBack()},openMenu:function(){this.menuShow=!0},closeMenu:function(){this.menuShow=!1},showPopup:function(){this.popupShow=!0},hidePopup:function(){this.popupShow=!1},change:function(t){this.submitCart.num=t.value},collecting:function(){if(a.globalData.haslogin)if(this.collected=!this.collected,this.collected){var e={url:a.apis().addLike,method:"POST",token:a.globalData.token,data:{gid:this.gid,mid:a.globalData.mid}};a.httpRequest(e).then((function(t){console.log("result of addlLike:",JSON.parse(t.data))}))}else{var n={url:a.apis().killLike,method:"POST",token:a.globalData.token,data:{killid:this.gid}};a.httpRequest(n).then((function(t){console.log("result of killLike:",JSON.parse(t.data))}))}else t.showModal({cancelColor:"#222222",cancelText:"取消",confirmColor:"#07C160",confirmText:"登录",content:"收藏前请先登录哦~",showCancel:!0,title:"收藏",success:function(e){e.confirm&&t.navigateTo({url:"../../login/login?entry=productDetail"})}})},common:function(){this.tui.toast("功能开发中~")},btnTopMenu:function(e){if(this.closeMenu(),4==e)t.makePhoneCall({phoneNumber:"10086"});else if(6==e);else{var n={0:"../message/message",1:"../mall/mall",2:"../my/my",3:"../shopcart/shopcart",5:"/pages/my/feedback/feedback?page=mall"}[e];n&&this.tui.href(n)}},chooseAddr:function(){t.navigateTo({url:"../address/address"})},submit:function(){this.popupShow=!1,t.navigateTo({url:"../submitOrder/submitOrder"})},coupon:function(){t.navigateTo({url:"../coupon/coupon"})},onShare:function(){}},onPageScroll:function(t){var e=t.scrollTop<=0?0:t.scrollTop,n=e/this.scrollH;this.opcity>=1&&n>=1||(this.opcity=n,this.iconOpcity=.5*(1-n<0?0:1-n))}};e.default=u}).call(this,n("543d")["default"])},"68a7":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={tuiIcon:function(){return n.e("components/thorui/tui-icon/tui-icon").then(n.bind(null,"9f62"))},tuiBadge:function(){return n.e("components/thorui/tui-badge/tui-badge").then(n.bind(null,"90a2"))},tuiTag:function(){return n.e("components/thorui/tui-tag/tui-tag").then(n.bind(null,"d5dd"))},tuiButton:function(){return n.e("components/thorui/tui-button/tui-button").then(n.bind(null,"03d1"))},tuiNomore:function(){return n.e("components/thorui/tui-nomore/tui-nomore").then(n.bind(null,"e673"))},tuiTopDropdown:function(){return n.e("components/thorui/tui-top-dropdown/tui-top-dropdown").then(n.bind(null,"32fc"))},tuiBottomPopup:function(){return n.e("components/thorui/tui-bottom-popup/tui-bottom-popup").then(n.bind(null,"8510"))},tuiNumberbox:function(){return n.e("components/thorui/tui-numberbox/tui-numberbox").then(n.bind(null,"088f"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.chooseType.fee.toFixed(2).toString().split(".")),o=t.chooseType.fee.toFixed(2).toString().split(".");t.$mp.data=Object.assign({},{$root:{g0:n,g1:o}})},a=[]},"82b6":function(t,e,n){},ba72:function(t,e,n){"use strict";n.r(e);var o=n("45ac"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},bc39:function(t,e,n){"use strict";(function(t){n("ff5b");o(n("66fd"));var e=o(n("2eb3"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f4e3:function(t,e,n){"use strict";var o=n("82b6"),i=n.n(o);i.a}},[["bc39","common/runtime","common/vendor"]]]);