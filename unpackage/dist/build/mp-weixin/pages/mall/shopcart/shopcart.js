(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall/shopcart/shopcart"],{"0e55":function(t,e,i){"use strict";i.r(e);var n=i("16f6"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},"16f6":function(t,e,i){"use strict";(function(t){var i;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(u)throw s}}}}function r(t,e){if(t){if("string"===typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),u=(i={data:function(){return{shopcartList:[],dataList:[{id:"t2020003120",buyNum:2,price:299.5,selected:!1},{id:"t1020003120",buyNum:1,price:499,selected:!1}],isAll:!1,totalPrice:0,buyNum:0,actions:[{name:"收藏",width:64,color:"#fff",fontsize:28,background:"#FFC600"},{name:"看相似",color:"#fff",fontsize:28,width:64,background:"#FF7035"},{name:"删除",color:"#fff",fontsize:28,width:64,background:"#F82400"}],actions2:[{name:"看相似",color:"#fff",fontsize:28,width:64,background:"#FF7035"},{name:"删除",color:"#fff",fontsize:28,width:64,background:"#F82400"}],isEdit:!1,productList:[],pageIndex:1,loadding:!1,pullUpOn:!0,selectedList:[]}},filters:{getPrice:function(t){return t=t||0,t.toFixed(2)}},onLoad:function(){this.showGood()},onShow:function(){this.getshopCart()},methods:{typenumber:function(){var t,e=0,i=0,n=o(this.shopcartList);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.selected&&e++,r.isDelete&&i++}}catch(s){n.e(s)}finally{n.f()}this.buyNum=e,this.deleteNum=i,this.getSelectedGood()},deleteGood:function(){this.typenumber();var e=this;t.showModal({title:"提示",content:"确定要删除"+this.deleteNum+"个商品吗？",success:function(i){if(i.confirm)for(var n=0;n<e.shopcartList.length;n++)if(e.shopcartList[n].isDelete){var o={url:a.apis().killCart,method:"POST",data:{cartid:e.shopcartList[n].id},token:a.globalData.token};a.httpRequest(o).then((function(i){200==JSON.parse(i.data).code?(e.getshopCart(),t.showToast({title:"操作成功~",duration:900,icon:"success"})):t.showToast({title:"网络繁忙",duration:900,icon:"loading"})}))}}})},getshopCart:function(){var t=this,e={url:a.apis().getCart,token:a.globalData.token,methods:"GET"};a.httpRequest(e).then((function(e){t.shopcartList=JSON.parse(e.data).data;for(var i=0;i<t.shopcartList.length;i++)t.shopcartList[i].selected=!1,t.shopcartList[i].isDelete=!1;t.countPrice(),console.log("shopcart:",JSON.parse(e.data).data)}))},showGood:function(){var e,i=t.getStorageSync("goodList").data,n=new Array,r=o(i);try{for(r.s();!(e=r.n()).done;){var s=e.value,a={gid:s.id,img:s.icon,name:s.name,sale:s.fee,factory:s.oldfee,payNum:s.paynum};n.push(a)}}catch(u){r.e(u)}finally{r.f()}this.productList=n},selected:function(t){this.isEdit?(this.shopcartList[t].isDelete=!this.shopcartList[t].isDelete,console.log(this.shopcartList[t].isDelete)):(this.shopcartList[t].selected=!this.shopcartList[t].selected,this.countPrice())},calcHandle:function(){},changeNum:function(t){var e=this;this.shopcartList[t.index].num=t.value,this.countPrice(),setTimeout((function(){e.calcHandle()}),0)},editGoods:function(){this.isEdit,this.isEdit=!this.isEdit},detail:function(e){t.navigateTo({url:"../productDetail/productDetail?gid="+e})},btnPay:function(){t.navigateTo({url:"../submitOrder/submitOrder"})},checkAll:function(t){if(this.isAll=!this.isAll,this.isEdit){if(this.isAll){var e,i=o(this.shopcartList);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.isDelete=!0}}catch(p){i.e(p)}finally{i.f()}}else{var r,s=o(this.shopcartList);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.isDelete=!1}}catch(p){s.e(p)}finally{s.f()}}this.countPrice()}else{if(this.isAll){var u,c=o(this.shopcartList);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.selected=!0}}catch(p){c.e(p)}finally{c.f()}}else{var f,d=o(this.shopcartList);try{for(d.s();!(f=d.n()).done;){var h=f.value;h.selected=!1}}catch(p){d.e(p)}finally{d.f()}}this.countPrice()}},countPrice:function(){var t,e=0,i=o(this.shopcartList);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.selected&&(e+=n.num*n.type.fee)}}catch(r){i.e(r)}finally{i.f()}this.totalPrice=e,this.typenumber()},getSelectedGood:function(){this.selectedList=[];var e,i=o(this.shopcartList);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.selected&&this.selectedList.push(n)}}catch(r){i.e(r)}finally{i.f()}t.setStorageSync("submitOrder",this.selectedList)}},onPullDownRefresh:function(){setTimeout((function(){t.stopPullDownRefresh()}),200)}},n(i,"onPullDownRefresh",(function(){var e=JSON.parse(JSON.stringify(this.productList));e=e.splice(0,10),this.productList=e,this.pageIndex=1,this.pullUpOn=!0,this.loadding=!1,t.stopPullDownRefresh()})),n(i,"onReachBottom",(function(){if(this.pullUpOn)if(this.loadding=!0,4==this.pageIndex)this.loadding=!1,this.pullUpOn=!1;else{var t=JSON.parse(JSON.stringify(this.productList));t=t.splice(0,10),1==this.pageIndex&&(t=t.reverse()),this.productList=this.productList.concat(t),this.pageIndex=this.pageIndex+1,this.loadding=!1}})),n(i,"onNavigationBarButtonTap",(function(t){this.isEdit=!this.isEdit;this.isEdit})),i);e.default=u}).call(this,i("543d")["default"])},"1a15":function(t,e,i){"use strict";(function(t){i("ff5b");n(i("66fd"));var e=n(i("4021"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},2383:function(t,e,i){},4021:function(t,e,i){"use strict";i.r(e);var n=i("bf66"),o=i("0e55");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("48b6");var s,a=i("f0c5"),u=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},"48b6":function(t,e,i){"use strict";var n=i("2383"),o=i.n(n);o.a},bf66:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={tuiButton:function(){return i.e("components/thorui/tui-button/tui-button").then(i.bind(null,"03d1"))},tuiSwipeAction:function(){return i.e("components/thorui/tui-swipe-action/tui-swipe-action").then(i.bind(null,"fdcf"))},tuiNumberbox:function(){return i.e("components/thorui/tui-numberbox/tui-numberbox").then(i.bind(null,"088f"))},tuiDivider:function(){return i.e("components/thorui/tui-divider/tui-divider").then(i.bind(null,"8a6f"))},tuiIcon:function(){return i.e("components/thorui/tui-icon/tui-icon").then(i.bind(null,"9f62"))},tuiLoadmore:function(){return i.e("components/thorui/tui-loadmore/tui-loadmore").then(i.bind(null,"d7a7"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.isEdit?null:t.__map(t.shopcartList,(function(e,i){var n=t.__get_orig(e),o=e.type.fee.toFixed(2).toString().split("."),r=e.type.fee.toFixed(2).toString().split(".");return{$orig:n,g0:o,g1:r}}))),n=t.isEdit?t.__map(t.shopcartList,(function(e,i){var n=t.__get_orig(e),o=e.type.fee.toFixed(2).toString().split("."),r=e.type.fee.toFixed(2).toString().split(".");return{$orig:n,g2:o,g3:r}})):null,o=t.shopcartList.length>0&&!t.isEdit?t._f("getPrice")(t.totalPrice):null;t.$mp.data=Object.assign({},{$root:{l0:i,l1:n,f0:o}})},r=[]}},[["1a15","common/runtime","common/vendor"]]]);